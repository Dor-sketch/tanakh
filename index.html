<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> תנ״ך מקוון | Hebrew Bible Reader by Dor Pascal</title>
    <meta name="description" content='קרא את התנ"ך בעברית באופן אינטראקטיבי. בחר ספר, פרק וקרא פסוקים בעברית. תנ"ך עברי עם ממשק נוח למשתמש. כולל סימני פיסוק ומספרי פרקים ופסוקים.'>
    <meta name="author" content="Dor Pascal">
    <meta name="keywords" content='תנ"ך, קורא תנ"ך, תנ"ך עברי, Bible, Hebrew Bible, Tanakh, Torah, Nevi-im, Ketuvim'>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dorpascal.com/tanakh/">
    <meta property="og:title" content='קורא התנ"ך העברי | Hebrew Bible Reader'>
    <meta property="og:description" content='קרא את התנ"ך בעברית באופן אינטראקטיבי. בחר ספר, פרק וקרא פסוקים בעברית. תנ"ך עברי עם ממשק נוח למשתמש. כולל סימני פיסוק ומספרי פרקים ופסוקים.'>
    <meta property="og:image" content="https://dorpascal.com/tanakh/images/og-image.webp">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://dorpascal.com/tanakh/">
    <meta property="twitter:title" content='קורא התנ"ך העברי | Hebrew Bible Reader'>
    <meta property="twitter:description" content='קרא את התנ"ך בעברית באופן אינטראקטיבי. בחר ספר, פרק וקרא פסוקים בעברית.'>
    <meta property="twitter:image" content="https://dorpascal.com/tanakh/images/og-image.webp">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="16x16" href="images/icons/icons8-book-infographic-16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/icons/icons8-book-infographic-32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="images/icons/icons8-book-infographic-48.png">
    <link rel="icon" type="image/png" sizes="57x57" href="images/icons/icons8-book-infographic-57.png">
    <link rel="icon" type="image/png" sizes="60x60" href="images/icons/icons8-book-infographic-60.png">
    <link rel="icon" type="image/png" sizes="70x70" href="images/icons/icons8-book-infographic-70.png">
    <link rel="icon" type="image/png" sizes="72x72" href="images/icons/icons8-book-infographic-72.png">
    <link rel="icon" type="image/png" sizes="76x76" href="images/icons/icons8-book-infographic-76.png">
    <link rel="icon" type="image/png" sizes="96x96" href="images/icons/icons8-book-infographic-96.png">
    <link rel="icon" type="image/png" sizes="114x114" href="images/icons/icons8-book-infographic-114.png">
    <link rel="icon" type="image/png" sizes="120x120" href="images/icons/icons8-book-infographic-120.png">
    <link rel="icon" type="image/png" sizes="144x144" href="images/icons/icons8-book-infographic-144.png">
    <link rel="icon" type="image/png" sizes="150x150" href="images/icons/icons8-book-infographic-150.png">
    <link rel="icon" type="image/png" sizes="152x152" href="images/icons/icons8-book-infographic-152.png">
    <link rel="icon" type="image/png" sizes="180x180" href="images/icons/icons8-book-infographic-180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="images/icons/icons8-book-infographic-192.png">
    <link rel="icon" type="image/png" sizes="310x310" href="images/icons/icons8-book-infographic-310.png">
    <link rel="icon" type="image/png" sizes="512x512" href="images/icons/icons8-book-infographic-512.png">

    <meta name="theme-color" content="#2c3e50">
    <!-- Canonical URL -->
    <link rel="canonical" href="https://dorpascal.com/tanakh/">

    <link rel="alternate" hreflang="he" href="https://dorpascal.com/tanakh/">
    <link rel="alternate" hreflang="en" href="https://dorpascal.com/tanakh/en/">
    <link rel="alternate" hreflang="x-default" href="https://dorpascal.com/tanakh/">

    <!-- Styles -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@300;400;700&display=swap');

        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #e67e22;
            --background-color: #ecf0f1;
            --text-color: #2c3e50;
            --verse-hover-color: #f39c12;
            --modal-bg: rgba(0, 0, 0, 0.5);
            --modal-content-bg: #fff;
        }

        body {
            font-family: 'Frank Ruhl Libre', serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .header {
            background-color: var(--primary-color);
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            background-color: rgba(44, 62, 80, 0.9);
            backdrop-filter: blur(10px);
        }

        .header .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: center;
        }

        .header select, .header input, .header button {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.25rem;
            font-size: 1rem;
        }

        .header select {
            background-color: white;
            color: var(--text-color);
        }

        .header input {
            flex: 1;
        }

        .header button {
            background-color: var(--accent-color);
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .header button:hover {
            background-color: darkorange;
        }

        .container {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            padding: 2rem;
            overflow-y: auto;
            margin: 0 auto;
            max-width: 800px;
        }

        .content-area {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            flex-grow: 1;
            overflow-y: auto;
            transition: all 0.3s ease;
        }

        .verse {
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0.75rem;
            border-radius: 0.25rem;
            margin-bottom: 0.75rem;
            background-color: rgba(236, 240, 241, 0.5);
        }

        .verse:hover {
            background-color: var(--verse-hover-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .verse-number {
            font-weight: bold;
            color: var(--accent-color);
            margin-left: 0.5rem;
            font-size: 0.9em;
        }

        footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 1rem;
            margin-top: 2rem;
        }

        footer a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: white;
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }

            .header .controls {
                width: 100%;
                gap: 0.5rem;
            }

            .content-area {
                padding: 1rem;
            }
        }

        /* Scrollbar styling */
        .content-area::-webkit-scrollbar {
            width: 8px;
        }

        .content-area::-webkit-scrollbar-track {
            background: var(--background-color);
        }

        .content-area::-webkit-scrollbar-thumb {
            background-color: var(--secondary-color);
            border-radius: 20px;
            border: 3px solid var(--background-color);
        }

        /* Highlighted search terms */
        .highlight {
            background-color: yellow;
            color: black;
        }
        input {
        color:#2c3e50;
        background-color: #ecf0f1;
        border: 1px solid #bdc3c7;
        border-radius: 5px;
        padding: 5px;
        margin: 5px;
        font-size: 16px;
        }

        input:hover {
        background-color: #bdc3c7;
        }
        /* Modal styling */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: var(--modal-bg);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--modal-content-bg);
            padding: 2rem;
            border-radius: 0.5rem;
            max-width: 600px;
            width: 90%;
            position: relative;
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .modal-content h2 {
            margin-bottom: 1rem;
        }

        .modal-content p {
            margin-bottom: 1rem;
        }

        .modal-content a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .close-modal {
            position: absolute;
            top: 0;
            left: 0;
            background: none;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            color: var(--primary-color);
            padding: 8px 16px;
            font-size: large;
            border-radius: 7px;
        }

        .close-modal:hover {
            color: var(--accent-color);
        }

        .close-modal:focus {
            outline: none;
        }
        #toggleNumbering {
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            width: 108px;
            padding: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #toggleNumbering:hover {
            background-color: darkorange;
        }
        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        select, input[type="text"], button {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ced4da;
            border-radius: 4px;
        }
        button {
            display: flex;
            align-items: center;
            gap: 5px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        button svg {
            fill: white;
        }
        button:hover {
            background-color: #0056b3;
        }

        #nextChapter, #prevChapter {
            display: flex;
            align-items: center;
            gap: 5px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
            padding: 10px;
            border: none;
            border-radius: 4px;
        }

        #nextChapter svg, #prevChapter svg {
            fill: white;
        }

        #nextChapter:hover, #prevChapter:hover {
            background-color: #0056b3;
        }

        /* Loading animation */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .loading {
            animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        @media screen and (max-width: 768px) {
            .header {
                padding: 1rem;
                padding-bottom: 6px;
                padding-top: 6px;
            }
            .container {
                padding: 1rem;
                padding-top: 6px;
            }

            .header select, .header input {
                padding: 0.5rem;
            }

            .modal-content {
                padding: 1.5rem;
            }

            .header button {
                padding: 0.5rem 1rem;
                height: 40px;
            }

            .verse {
                padding: 0.5rem;
            }

            .verse-number {
                margin-left: 0.25rem;
            }

            .footer {
                padding: 0.5rem;
            }

            .footer a {
                font-size: 0.9rem;
            }

            .button-text {
                display: none;
            }

            .controls {
                margin-bottom: 0;
                justify-content: space-between;
            }
        }

        #prevNext {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }


    </style>
    <!-- Schema.org markup for Google -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "קורא התנ''ך העברי | Hebrew Bible Reader",
      "url": "https://dorpascal.com/tanakh/",
      "author": {
        "@type": "Person",
        "name": "Dor Pascal"
      },
      "description": "An interactive Hebrew Bible reader allowing users to select books, chapters, and read verses in Hebrew.",
      "applicationCategory": "ReferenceApplication",
      "applicationSubCategory": "Religious",
      "operatingSystem": "All",
      "inLanguage": "he",
      "softwareVersion": "1.0",
      "datePublished": "2023-01-01",
      "dateModified": "2023-10-01",
      "screenshot": "https://dorpascal.com/tanakh/images/og-image.webp",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "url": "https://dorpascal.com/tanakh/"
      },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "5",
            "bestRating": "5",
            "worstRating": "1",
            "ratingCount": "1"
        }
    }
    </script>

    <!-- SoftwareSourceCode for GitHub repository -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareSourceCode",
      "name": "Hebrew Bible Reader Source Code",
      "codeRepository": "https://github.com/Dor-sketch/tanakh",
      "url": "https://github.com/Dor-sketch/tanakh",
      "author": {
        "@type": "Person",
        "name": "Dor Pascal"
      },
      "programmingLanguage": "JavaScript",
      "license": "https://opensource.org/licenses/MIT",
      "description": "Open-source code for the Hebrew Bible Reader."
    }
    </script>

    <!-- WebApplication for Chrome Extension -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "תנ״ך מקוון - Chrome Extension",
      "url": "https://chrome.google.com/webstore/detail/%D7%AA%D7%A0%D7%B4%D7%9A-%D7%9E%D7%A7%D7%95%D7%95%D7%9F/jkadmhnjhehekcgcajgnjjiehiefndcd",
      "operatingSystem": "All",
      "applicationCategory": "ReferenceApplication",
      "applicationSubCategory": "Religious",
      "description": "A Chrome extension providing access to the Hebrew Bible Reader.",
      "browserRequirements": "Google Chrome",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "url": "https://chrome.google.com/webstore/detail/%D7%AA%D7%A0%D7%B4%D7%9A-%D7%9E%D7%A7%D7%95%D7%95%D7%9F/jkadmhnjhehekcgcajgnjjiehiefndcd"
      },
      "inLanguage": "he",
      "author": {
        "@type": "Person",
        "name": "Dor Pascal"
      },
      "softwareVersion": "1.0",
    "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5",
        "bestRating": "5",
        "worstRating": "1",
        "ratingCount": "1"
    }
    }
    </script>

    <!-- Bread crumbs -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "description": "Breadcrumbs list for the Hebrew Bible Reader",
      "name": "Hebrew Bible Reader",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://dorpascal.com"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "Hebrew Bible Reader",
        "item": "https://dorpascal.com/tanakh/"
      }]
    }
    </script>

    <!-- Google Tag Manager -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T7HFKFX0PR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-T7HFKFX0PR');
    </script>
</head>
<body>
    <div class="header">
        <div class="controls">
            <select id="book" aria-label="בחר ספר">
                <option value="">בחר ספר</option>
            </select>
            <select id="chapter" aria-label="בחר פרק">
                <option value="">בחר פרק</option>
            </select>
            <input type="text" id="search" placeholder="חפש בתנ״ך" aria-label="חפש בתנ״ך" />
           <button id="searchButton">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 2C5.58 2 2 5.58 2 10C2 14.42 5.58 18 10 18C11.85 18 13.55 17.35 14.88 16.24L20.29 21.65C20.68 22.04 21.31 22.04 21.7 21.65C22.09 21.26 22.09 20.63 21.7 20.24L16.29 14.83C17.35 13.55 18 11.85 18 10C18 5.58 14.42 2 10 2ZM10 4C13.31 4 16 6.69 16 10C16 13.31 13.31 16 10 16C6.69 16 4 13.31 4 10C4 6.69 6.69 4 10 4Z" fill="currentColor"/>
    </svg>
    <span class="button-text">חפש</span>
</button>
<button id="helpBtn">
<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16" height="16" viewBox="0 0 30 30">
    <path d="M 15.089844 3 C 10.131844 3 7.3202344 5.7778281 7.2402344 9.7988281 L 7.2402344 10 L 11.617188 10 L 11.617188 9.7988281 C 11.713187 8.0228281 12.941828 6.8769531 14.798828 6.8769531 C 16.639828 6.8769531 17.867188 7.9413594 17.867188 9.4433594 C 17.867188 10.945359 17.237297 11.720844 15.154297 12.964844 C 12.925297 14.272844 12.036094 15.726547 12.246094 18.310547 L 12.271484 19 L 16.558594 19 L 16.558594 18.34375 C 16.558594 16.79375 17.156688 16.000812 19.304688 14.757812 C 21.581688 13.416813 22.759766 11.721828 22.759766 9.2988281 C 22.759766 5.5678281 19.708844 3 15.089844 3 z M 14.507812 22 C 12.864813 22 11.839844 22.953813 11.839844 24.507812 C 11.839844 26.047813 12.865813 27 14.507812 27 C 16.149812 27 17.162109 26.047812 17.162109 24.507812 C 17.162109 22.953813 16.150813 22 14.507812 22 z"></path>
</svg>
    <span class="button-text">עזרה</span>
</button>
<button id="aboutBtn">
    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16" height="16" viewBox="0 0 24 24">
    <path d="M 12 2 C 10.343 2 9 3.343 9 5 C 9 6.657 10.343 8 12 8 C 13.657 8 15 6.657 15 5 C 15 3.343 13.657 2 12 2 z M 9 10 A 1.0001 1.0001 0 1 0 9 12 L 10 12 L 10 20 L 9 20 A 1.0001 1.0001 0 1 0 9 22 L 15 22 A 1.0001 1.0001 0 1 0 15 20 L 14 20 L 14 11 C 14 10.448 13.552 10 13 10 L 11 10 L 9 10 z"></path>
</svg>
    <span class="button-text">אודות</span>
</button>
<div id="prevNext">
<button id="prevChapter">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8.59 16.59L10 18L16 12L10 6L8.59 7.41L13.17 12L8.59 16.59Z" fill="currentColor"/>
    </svg>
    <span class="button-text">פרק קודם</span>
</button>
<button id="nextChapter">
    <span class="button-text">פרק הבא</span>
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15.41 7.41L14 6L8 12L14 18L15.41 16.59L10.83 12L15.41 7.41Z" fill="currentColor"/>
    </svg>
</button>
</div>
        </div>
    </div>
    <div class="container">
        <div id="content" class="content-area w-full"></div>
    </div>

    <footer>
        <p>נוצר על ידי <a href="https://dorpascal.com/he" target="_blank" rel="noopener noreferrer">דור פסקל</a></p>
    </footer>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" id="closeHelpModal">&times;</button>
            <h2>שימוש ראשון</h2>
            <p>ברוכים הבאים לתנ״ך המקוון! ניתן לבחור ספר, פרק ולקרוא פסוקים בעברית.</p>
            <p>באפשרותך לחפש ביטוי בתנ"ך בעזרת שורת החיפוש, וכן לנווט בין פרקים בעזרת כפתורי "פרק קודם" ו"פרק הבא".</p>
            <p>המערכת זוכרת את המיקום האחרון שקראת, ותפתח שם בפעם הבאה שתכנס.</p>
        </div>
    </div>

    <!--- About Modal -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" id="closeAboutModal">&times;</button>
            <h2>אודות</h2>
            <p>תנ״ך מכוון פותח ללא מטרת רווח במטרה להנגיש את התנ"ך לקהל הרחב באופן נוח וקל לשימוש. התוכנה מאפשרת לקרוא פסוקים בעברית, לחפש בתנ"ך ולנווט בין פרקים. התוכנה לא אוספת מידע אישי על משתמשים, והפרטים שדרושים לעבודה שלה נשמרים באופן מקומי אך ורק אצל המשתמשים. לפרטים נוספים ראה <a href="https://dorpascal.com/tanakh/privacy-policy">מדיניות פרטיות</a>.</p>
            <p>מה עוד אנחנו מציעים?</p>
            <ul>
            <li>
            <p>התוכנה עובדת בעזרת אלגוריתים שפותחו עצמאית, ומתבססת על מידע מפרויקט <a href="https://www.sefaria.org.il/texts" target="_blank" rel="noopener noreferrer">ספריא</a>.</p>
            </li>
            <li>
            <p>הקוד המקורי זמין ב-<a href="https://github.com/Dor-sketch/tanakh" target="_blank" rel="noopener noreferrer">GitHub</a>.</p>
            </li>
            <li>
            <p>התנ״ך זמין גם כתוסף לדפדפנים המובילים: <a href="https://chrome.google.com/webstore/detail/%D7%AA%D7%A0%D7%B4%D7%9A-%D7%9E%D7%A7%D7%95%D7%95%D7%9F/jkadmhnjhehekcgcajgnjjiehiefndcd" target="_blank" rel="noopener noreferrer">Chrome</a>, <a href="https://microsoftedge.microsoft.com/addons/detail/jomipflbgdbembbimeakhcppbfiphahn" target="_blank" rel="noopener noreferrer">Edge</a>.</p>
            </li>
            </ul>
            <p>ככל שמישהו מוצא טעות או שיש לו דברים לכתוב לנו הוא מוזמן לפנות אלינו בכתובת המייל <a href="mailto:tanakh@dorpascal.com" target="_blank" rel="noopener noreferrer">tanakh@dorpascal.com</a></p>
        </div>
    </div>

<script>
    const bibleDataUrl = './proxy-server/full_bible.json';
    let bibleData = {};
    let lastVisit = JSON.parse(localStorage.getItem('lastVisit')) || { book: 'בראשית', chapter: 1 };
    let useHebrewNumbering = JSON.parse(localStorage.getItem('useHebrewNumbering') || 'true');

    const bookSelect = document.getElementById('book');
    const chapterSelect = document.getElementById('chapter');
    const contentDiv = document.getElementById('content');
    const searchInput = document.getElementById('search');
    const searchButton = document.getElementById('searchButton');
    const prevChapterBtn = document.getElementById('prevChapter');
    const nextChapterBtn = document.getElementById('nextChapter');
    const helpModal = document.getElementById('helpModal');
    const helpBtn = document.getElementById('helpBtn');
    const closeHelpModal = document.getElementById('closeHelpModal');
    const aboutModal = document.getElementById('aboutModal');
    const aboutBtn = document.getElementById('aboutBtn');

    // Create toggle button for numbering system
    const toggleNumberingBtn = document.createElement('button');
    toggleNumberingBtn.textContent = useHebrewNumbering ? 'מספרים רגילים' : 'מספור עברי';
    toggleNumberingBtn.id = 'toggleNumbering';
    const prevNext = document.getElementById('prevNext');
    const parent = prevNext.parentNode;

    // append it before the prevNext div
    parent.insertBefore(toggleNumberingBtn, prevNext);
    // Function to load Bible data from JSON file
    async function loadBibleData() {
        try {
            const response = await fetch(bibleDataUrl);
            if (!response.ok) {
                throw new Error(`Failed to load full_bible.json: ${response.statusText}`);
            }
            bibleData = await response.json();
            populateBooks();
            openLastVisit();
        } catch (error) {
            console.error('Error loading Bible data:', error);
            contentDiv.innerHTML = '<p class="error">שגיאה בטעינת נתוני התנ"ך. אנא נסה שוב.</p>';
        }
    }

    // Populate book select dropdown
    function populateBooks() {
        const books = Object.keys(bibleData);
        bookSelect.innerHTML = '<option value="">בחר ספר</option>';
        books.forEach(book => {
            const option = document.createElement('option');
            option.value = book;
            option.textContent = book;
            bookSelect.appendChild(option);
        });
        bookSelect.value = lastVisit.book;
    }

    // Populate chapter dropdown based on selected book
    function populateChapters(book) {
        const chapters = bibleData[book];
        chapterSelect.innerHTML = '<option value="">בחר פרק</option>';
        chapters.forEach((_, index) => {
            const option = document.createElement('option');
            option.value = index + 1;
            option.textContent = `פרק ${formatNumber(index + 1)}`;
            chapterSelect.appendChild(option);
        });
        chapterSelect.value = lastVisit.chapter;
    }

    // Function to convert number to Hebrew letters with correct quotation placement
    function numberToHebrewLetters(num) {
        const hebChars = "אבגדהוזחטיכלמנסעפצקרשת";
        const hebTens = "יכלמנסעפצ";
        let result = "";

        if (num >= 1000) {
            result = numberToHebrewLetters(Math.floor(num / 1000)) + "'";
            num %= 1000;
        }

        if (num >= 100) {
            result += hebChars[Math.floor(num / 100) - 1];
            num %= 100;
        }

        if (num >= 10) {
            result += hebTens[Math.floor(num / 10) - 1];
            num %= 10;
        }

        if (num > 0) {
            result += hebChars[num - 1];
        }

        // Special cases for 15 and 16
        result = result.replace('יה', 'טו').replace('יו', 'טז');

        // Insert quotation mark between characters for numbers 11-99
        if (result.length === 2) {
            result = result[0] + '"' + result[1];
        } else if (result.length > 2) {
            result += '"';
        } else {
            result += "'";
        }

        return result;
    }

    // Function to format number based on current numbering system
    function formatNumber(num) {
        return useHebrewNumbering ? numberToHebrewLetters(num) : num.toString();
    }

    // Load content for selected book and chapter
    function loadChapterContent(book, chapter) {
        const verses = bibleData[book][chapter - 1];
        contentDiv.innerHTML = verses.map((verse, index) => `
            <p class="verse" data-verse="${index + 1}">
                <span class="verse-number">${formatNumber(index + 1)}</span>
                ${verse}
            </p>
        `).join('');

        // Store last visit in localStorage
        localStorage.setItem('lastVisit', JSON.stringify({ book, chapter }));
    }

    // Navigate to previous chapter
    prevChapterBtn.addEventListener('click', () => {
        let currentChapter = parseInt(chapterSelect.value);
        if (currentChapter > 1) {
            chapterSelect.value = currentChapter - 1;
            loadChapterContent(bookSelect.value, currentChapter - 1);
        }
    });

    // Navigate to next chapter
    nextChapterBtn.addEventListener('click', () => {
        let currentChapter = parseInt(chapterSelect.value);
        if (currentChapter < bibleData[bookSelect.value].length) {
            chapterSelect.value = currentChapter + 1;
            loadChapterContent(bookSelect.value, currentChapter + 1);

            // Scroll to the top of the page with a smooth effect
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
    });

    // Handle book selection
    bookSelect.addEventListener('change', () => {
        const selectedBook = bookSelect.value;
        if (selectedBook) {
            populateChapters(selectedBook);
            loadChapterContent(selectedBook, 1); // Load first chapter by default
        }
    });

    // Handle chapter selection
    chapterSelect.addEventListener('change', () => {
        const selectedChapter = chapterSelect.value;
        if (selectedChapter) {
            loadChapterContent(bookSelect.value, selectedChapter);
        }
    });

    // Search functionality
    searchButton.addEventListener('click', performSearch);
    searchInput.addEventListener('keypress', event => {
        if (event.key === 'Enter') {
            performSearch();
        }
    });

    function performSearch() {
        const query = searchInput.value.trim();
        if (!query) return;

        const regex = new RegExp(removeNikud(query), 'gi');
        contentDiv.innerHTML = '';

        Object.keys(bibleData).forEach(book => {
            bibleData[book].forEach((chapter, chapterIndex) => {
                chapter.forEach((verse, verseIndex) => {
                    if (regex.test(removeNikud(verse))) {
                        contentDiv.innerHTML += `
                            <p class="verse">
                                <span class="verse-number">(${book} ${formatNumber(chapterIndex + 1)}:${formatNumber(verseIndex + 1)})</span>
                                ${verse.replace(regex, match => `<span class="highlight">${match}</span>`)}
                            </p>
                        `;
                    }
                });
            });
        });

        if (contentDiv.innerHTML === '') {
            contentDiv.innerHTML = '<p>לא נמצאו תוצאות</p>';
        }
    }

    // Function to remove Nikud (diacritical marks) from Hebrew text
    function removeNikud(text) {
        return text.replace(/[\u0591-\u05C7]/g, "");  // Unicode range for Hebrew Nikud
    }

    // Toggle numbering system
    toggleNumberingBtn.addEventListener('click', () => {
        useHebrewNumbering = !useHebrewNumbering;
        localStorage.setItem('useHebrewNumbering', JSON.stringify(useHebrewNumbering));
        toggleNumberingBtn.textContent = useHebrewNumbering ? 'מספרים רגילים' : 'מספור עברי';
        populateChapters(bookSelect.value);
        loadChapterContent(bookSelect.value, chapterSelect.value);
    });

    // Show help modal
    helpBtn.addEventListener('click', () => {
        helpModal.style.display = 'flex';
    });

    // Close help modal
    closeHelpModal.addEventListener('click', () => {
        helpModal.style.display = 'none';
    });

    // Show about modal
    aboutBtn.addEventListener('click', () => {
        aboutModal.style.display = 'flex';
    });

    // Close about modal
    closeAboutModal.addEventListener('click', () => {
        aboutModal.style.display = 'none';
    });

    // Load the last visit or default to בראשית, פרק 1
    function openLastVisit() {
        const { book, chapter } = lastVisit;
        if (bibleData[book]) {
            populateChapters(book);
            loadChapterContent(book, chapter);
        }
    }

    // Load Bible data on page load
    window.addEventListener('DOMContentLoaded', loadBibleData);

    // Hide modal when clicking outside the modal content
    window.addEventListener('click', event => {
        if (event.target === helpModal) {
            helpModal.style.display = 'none';
        }
    });
</script>

</body>
</html>
